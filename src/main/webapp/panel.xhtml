<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui">
<link rel="stylesheet" href="style.css"/>
<h:head>
</h:head>

<div class="card">
    <h1>EStream</h1>
    <p:tabMenu>
        <p:menuitem value="Специализации" action="specializations"/>
    </p:tabMenu>

    <div class="card">
        <p:panel rendered="#{panelUiController.isThereUserToServe()}">
            <p>Поступил запрос от пользователя <h:outputText value="#{panelUiController.getUserQueueCode()}"/></p><br/>
            <p>По специализации: </p>
            <p><strong>
                <h:outputText value="#{panelUiController.getSpecializationFromRequest()}"/>
            </strong></p>
            <br/>
                <h:form>
                    <h:commandButton type="submit"
                                     action="#{panelUiController.acceptUser()}"
                                     value="Войти в чат с пользователем"/>
                </h:form>
        </p:panel>
    </div>

    <div class="card">
        <p:panel header="Рабочий процесс">
            <p class="m-0">
                Управление рабочим процессом <br/><br/>
                <h:form rendered="#{panelUiController.isOperatorActive()}">
                    <h:commandButton action="#{panelUiController.getRequestFromQueue()}"
                                     value="Получить пользователя"
                                     styleClass="rounded-button"/>
                </h:form>

                <br/>

                <h:form rendered="#{!panelUiController.isOperatorActive()}">
                    <h:commandButton action="#{panelUiController.setOperatorActive(true)}"
                                     value="Начать рабочий день"
                                     styleClass="rounded-button"/>
                </h:form>

                <br/>

                <h:form rendered="#{panelUiController.isOperatorActive()}">
                    <h:commandButton action="#{panelUiController.stopWork()}"
                                     value="Закончить работу"
                                     styleClass="rounded-button"/>
                </h:form>
            </p>
        </p:panel>

        <p:panel header="Панель управления">
            <form method="post" action="/panel/create-specialization">
                <label for="specializationCreateName">Добавить специализацию</label><br/><br/>
                <input type="text" id="specializationCreateName" name="specializationName"/><br/><br/>
                <button type="submit">Подтвердить</button>
            </form>

            <br/><br/>

            <form method="post" action="/panel/delete-specialization">
                <label for="specializationDeleteName">Удалить специализацию</label><br/><br/>
                <input type="text" id="specializationDeleteName" name="specializationName"/><br/><br/>
                <button type="submit">Подтвердить</button>
            </form>

            <br/><br/>

            <form method="post" action="/panel/delete-all-specializations">
                <button type="submit">Удалить все специализации</button>
            </form>
        </p:panel>

        <p:panel header="Личные настройки">
            <div class="card" style="display: inline-block;">
                <h5>Все специализации:</h5>
                <p:orderList value="#{panelUiController.getSpecializations()}"
                             var="specialization"
                             controlsLocation="none"
                             itemLabel="#{specialization}"
                             itemValue="#{specialization}"/>
            </div>
            <div class="card" style="display: inline-block;">
                <h5>Ваши специализации:</h5>
                <p:orderList value="#{panelUiController.getCurrentOperatorSpecializations()}"
                             var="specialization"
                             controlsLocation="none"
                             itemLabel="#{specialization}"
                             itemValue="#{specialization}"/>
            </div>
            <div class="card" style="margin: 10px;">
                <form method="post" action="/settings/operator-add-specialization">
                    <label>
                        Добавить себе специализацию<br/><br/>
                        <input type="text" name="specializationName"/>
                    </label><br/><br/>
                    <button type="submit">Подтвердить</button>
                </form>
                <br/>
                <form method="post" action="/settings/operator-delete-specialization">
                    <label>
                        Удалить у себя специализацию<br/><br/>
                        <input type="text" name="specializationName"/>
                    </label><br/><br/>
                    <button type="submit">Подтвердить</button>
                </form>
            </div>
        </p:panel>
    </div>
</div>
</html>